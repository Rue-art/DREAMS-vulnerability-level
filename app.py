import streamlit as st
import joblib

# Load the model
model = joblib.load('Vulnerability_level_prediction_model.joblib')

# App Title
st.title('Vulnerability Level Prediction Model')

# Define all possible prediction values
prediction_options = ['Low Vulnerability', 'Moderate Vulnerability', 'High Vulnerability']

# Define categorical to numerical mappings (ensure consistency with prediction_options)
orphan_mapping = {'Total Orphan': 0, 'Partial Orphan': 1, 'Not Orphan': 2}  
house_type_mapping = {'Semi-Permanent': 0, 'Temporary': 1, 'Permanent': 2}  
disability_mapping = {'Yes': 0, 'No': 1}
school_status_mapping = {'Yes': 0, 'No': 1}
gbv_experience_mapping = {'Yes': 0, 'No': 1}
money_gift_mapping = {'Yes': 0, 'No': 1}

# Input fields for user data (use prediction_options where applicable)
current_age = st.slider('Current Age', min_value=0, max_value=30, step=1)
orphan_status = st.selectbox('Orphan or Not Orphan', list(orphan_mapping.keys()))  # Changed to use list(orphan_mapping.keys())
house_type = st.selectbox('Type of House', list(house_type_mapping.keys()))
has_disability = st.selectbox('Has Disability', list(disability_mapping.keys()))
currently_in_school = st.selectbox('Currently in School', list(school_status_mapping.keys()))
experienced_GBV_ever = st.selectbox('Experienced GBV Ever', list(gbv_experience_mapping.keys()))
received_money_gift_for_sex = st.selectbox('Received Money Gift for Sex', list(money_gift_mapping.keys()))

if st.button('Predict'):
    # Map input to numerical values
    input_data = [
        current_age,
        orphan_mapping[orphan_status],  
        house_type_mapping[house_type],
        disability_mapping[has_disability],
        school_status_mapping[currently_in_school],
        gbv_experience_mapping[experienced_GBV_ever],
        money_gift_mapping[received_money_gift_for_sex]
    ]

    # Make predictions
    prediction = model.predict([input_data])

    # Display prediction
    st.write('Prediction:', prediction[0])
